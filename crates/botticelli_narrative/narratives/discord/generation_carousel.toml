# Discord Post Generation Carousel
# Five narratives that each generate-critique-refine a single post
# Each narrative auto-stores to potential_posts table at completion
#
# Usage:
#   Single post:  just narrate generation_carousel.feature
#   Batch of 50:  just narrate generation_carousel.batch_generate

# === Batch Generator: Run all five narratives 10 times (50 posts) ===
[narratives.batch_generate]
name = "generation_batch_50"
description = "Run all five generation narratives 10 times using carousel mode"

[narratives.batch_generate.carousel]
iterations = 10

[narratives.batch_generate.toc]
order = ["feature", "usecase", "tutorial", "community", "problem"]

[narratives.batch_generate.acts.feature]
narrative = "feature"

[narratives.batch_generate.acts.usecase]
narrative = "usecase"

[narratives.batch_generate.acts.tutorial]
narrative = "tutorial"

[narratives.batch_generate.acts.community]
narrative = "community"

[narratives.batch_generate.acts.problem]
narrative = "problem"

# === Shared Model Configuration ===
[config.gemini]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

# === Shared Resources ===

# Load Botticelli context for the LLM
[media.context]
file = "BOTTICELLI_CONTEXT.md"

# === Shared Act Definitions ===

[acts.critique]
model = "gemini-2.5-flash-lite"
temperature = 0.3
max_tokens = 400

[[acts.critique.input]]
type = "text"
content = """
Critique this Discord post:

{{generate}}

Evaluate:
1. Engagement (hook, CTA)
2. Clarity (structure, readability)
3. Accuracy (matches Botticelli capabilities)
4. Discord formatting (markdown, emojis)
5. Length (under 1800 chars)

Provide specific improvements.
"""

[acts.refine]
model = "gemini-2.5-flash-lite"
temperature = 0.7
max_tokens = 600

[[acts.refine.input]]
type = "text"
content = """
Improve the post based on critique:

Original: {{generate}}

Critique: {{critique}}

Output the refined post as JSON (preserve the exact format):
{
  "text_content": "Improved post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "TAG_FROM_ORIGINAL"]
}
"""

# === Narrative 1: Feature Showcase ===
[narratives.feature]
name = "feature_showcase"
description = "Generate Discord post showcasing a Botticelli feature"
template = "potential_posts"

[narratives.feature.toc]
order = ["generate", "critique", "refine"]

[narratives.feature.acts.generate]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

[[narratives.feature.acts.generate.input]]
type = "text"
file = "BOTTICELLI_CONTEXT.md"

[[narratives.feature.acts.generate.input]]
type = "text"
content = """
Read the Botticelli context document above. Use this information to create an engaging Discord post.

Focus: Feature showcase
Angle: Highlight a specific Botticelli capability

Requirements:
- Length: Under 1800 characters
- Format: Discord markdown (**, *, __, ~~, ||) with emojis
- Structure: Hook, explanation, example, call-to-action
- Tone: Enthusiastic but professional

Output only the post text as JSON:
{
  "text_content": "Your post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "feature"]
}
"""

# === Narrative 2: Use Cases ===
[narratives.usecase]
name = "usecase_showcase"
description = "Generate Discord post about real-world Botticelli use cases"
template = "potential_posts"

[narratives.usecase.toc]
order = ["generate", "critique", "refine"]

[narratives.usecase.acts.generate]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

[[narratives.usecase.acts.generate.input]]
type = "text"
file = "BOTTICELLI_CONTEXT.md"

[[narratives.usecase.acts.generate.input]]
type = "text"
content = """
Read the Botticelli context document above. Use this information to create an engaging Discord post.

Focus: Real-world use cases
Angle: Show practical applications

Requirements:
- Length: Under 1800 characters
- Format: Discord markdown (**, *, __, ~~, ||) with emojis
- Structure: Hook, explanation, example, call-to-action
- Tone: Enthusiastic but professional

Output only the post text as JSON:
{
  "text_content": "Your post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "usecase"]
}
"""

# === Narrative 3: Tutorial ===
[narratives.tutorial]
name = "tutorial_guide"
description = "Generate Discord post with tutorial or how-to content"
template = "potential_posts"

[narratives.tutorial.toc]
order = ["generate", "critique", "refine"]

[narratives.tutorial.acts.generate]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

[[narratives.tutorial.acts.generate.input]]
type = "text"
file = "BOTTICELLI_CONTEXT.md"

[[narratives.tutorial.acts.generate.input]]
type = "text"
content = """
Read the Botticelli context document above. Use this information to create an engaging Discord post.

Focus: Tutorial or how-to guide
Angle: Educational, step-by-step

Requirements:
- Length: Under 1800 characters
- Format: Discord markdown (**, *, __, ~~, ||) with emojis
- Structure: Hook, explanation, example, call-to-action
- Tone: Enthusiastic but professional

Output only the post text as JSON:
{
  "text_content": "Your post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "tutorial"]
}
"""

# === Narrative 4: Community ===
[narratives.community]
name = "community_engagement"
description = "Generate Discord post for community engagement"
template = "potential_posts"

[narratives.community.toc]
order = ["generate", "critique", "refine"]

[narratives.community.acts.generate]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

[[narratives.community.acts.generate.input]]
type = "text"
file = "BOTTICELLI_CONTEXT.md"

[[narratives.community.acts.generate.input]]
type = "text"
content = """
Read the Botticelli context document above. Use this information to create an engaging Discord post.

Focus: Community engagement
Angle: Encourage participation, questions, sharing

Requirements:
- Length: Under 1800 characters
- Format: Discord markdown (**, *, __, ~~, ||) with emojis
- Structure: Hook, explanation, example, call-to-action
- Tone: Enthusiastic but professional

Output only the post text as JSON:
{
  "text_content": "Your post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "community"]
}
"""

# === Narrative 5: Problem-Solution ===
[narratives.problem]
name = "problem_solution"
description = "Generate Discord post about problems Botticelli solves"
template = "potential_posts"

[narratives.problem.toc]
order = ["generate", "critique", "refine"]

[narratives.problem.acts.generate]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 600

[[narratives.problem.acts.generate.input]]
type = "text"
file = "BOTTICELLI_CONTEXT.md"

[[narratives.problem.acts.generate.input]]
type = "text"
content = """
Read the Botticelli context document above. Use this information to create an engaging Discord post.

Focus: Problem-solution narrative
Angle: Common challenges Botticelli solves

Requirements:
- Length: Under 1800 characters
- Format: Discord markdown (**, *, __, ~~, ||) with emojis
- Structure: Hook, explanation, example, call-to-action
- Tone: Enthusiastic but professional

Output only the post text as JSON:
{
  "text_content": "Your post here...",
  "content_type": "discord_post",
  "source": "generation_carousel",
  "tags": ["potential", "problem_solution"]
}
"""
