# Tutorial Content Generation
# Generates comprehensive tutorial content for the Botticelli Discord server
# Uses carousel mode to produce 9 refined tutorial options

[narrative]
name = "tutorial_content"
description = "Generate tutorial content for Botticelli Discord server"

[narrative.carousel]
iterations = 3

[toc]
order = ["generate_batch", "critique_batch", "refine_best"]

[acts.generate_batch]
model = "gemini-2.5-flash-lite"
temperature = 0.8
max_tokens = 2000

[[acts.generate_batch.input]]
type = "text"
content = """
Create 10 tutorial options for "Getting Started with Botticelli" for the Discord server.

Botticelli enables multi-step AI workflows using TOML files. Key concepts:
- Narratives: Complete workflows with multiple acts
- Acts: Individual steps that can use AI, bot commands, or database operations
- Input types: Text prompts, images, audio, table references
- Output: Generated content that flows between acts
- Carousel: Loop mode for batch generation

Each tutorial should:
- Start with a simple "Hello World" narrative
- Progress to multi-act workflows
- Show how to save/load content from database
- Demonstrate input/output chaining
- Include complete, runnable code examples
- Use step-by-step instructions
- Be 500-700 words
- Use Discord markdown formatting

Target audience: Rust developers new to Botticelli

Provide your response as a JSON array with this schema:
[
  {
    "title": "Tutorial Title",
    "content": "Full tutorial content with code blocks and Discord markdown",
    "difficulty": "beginner",
    "topics_covered": ["narratives", "acts", "inputs", "chaining"],
    "example_count": 3
  }
]
"""

[acts.critique_batch]
model = "gemini-2.5-flash"
temperature = 0.3
max_tokens = 2000

[[acts.critique_batch.input]]
type = "text"
content = """
Review the 10 tutorial options from the previous act and provide a critique.

Evaluate each on:
1. Progression - Does it build concepts logically from simple to complex?
2. Code Quality - Are examples correct, complete, and well-explained?
3. Clarity - Are instructions easy to follow for beginners?
4. Completeness - Does it cover essential concepts thoroughly?
5. Practicality - Will users be productive after following this?

Provide an overall assessment and identify the 3 strongest tutorials.
"""

[acts.refine_best]
model = "gemini-2.5-flash"
temperature = 0.3
max_tokens = 2000

[[acts.refine_best.input]]
type = "text"
content = """
Based on the critique, select the 3 best tutorials and improve them further.

For each of the 3 selected tutorials:
- Optimize the learning progression
- Verify all code examples are correct and complete
- Enhance clarity of instructions
- Add missing concepts if needed
- Perfect formatting for Discord

Provide your response as a JSON array with the same schema:
[
  {
    "title": "Tutorial Title",
    "content": "Refined tutorial content with code blocks and Discord markdown",
    "difficulty": "beginner",
    "topics_covered": ["narratives", "acts", "inputs", "chaining"],
    "example_count": 3
  }
]

Aim for 3 polished, production-ready tutorials that get users productive quickly.
"""
