[package]
name = "boticelli"
version = "0.1.0"
edition = "2024"
description = "Unified library for bot-driver interaction with multiple LLM APIs (Gemini, Anthropic, Hugging Face, Groq, Perplexity)."
license = "MIT OR Apache-2.0"
authors = ["Erik Rose <erik.w.rose@gmail.com>"]
repository = "https://github.com/crumplecup/boticelli"
# readme = "README.md"
keywords = ["llm", "chatbot", "ai", "nlp", "api"]
categories = ["api-bindings", "asynchronous", "ai"]

[lib]
path = "src/lib.rs"

[[bin]]
name = "boticelli"
path = "src/main.rs"


[dependencies]
# Common async + HTTP stack
tokio = { version = "1", features = ["full"] }
reqwest = { version = "0.12", features = [
  "json",
  "gzip",
  "stream",
  "rustls-tls",
] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
async-trait = "0.1"
futures-util = "0.3"

# WebSocket support for Gemini Live API
tokio-tungstenite = { version = "0.21", features = ["native-tls"] }

# Rate limiting and retry
governor = "0.10"
tokio-retry2 = { version = "0.6", features = ["jitter"] }

# Structured logging and tracing
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["fmt", "env-filter"] }

# Environment variable loading
dotenvy = "0.15"

# Base64 encoding/decoding
base64 = "0.22"

# Content hashing for media storage
sha2 = "0.10"

# Database
diesel = { version = "2.3", features = [
  "postgres",
  "chrono",
  "uuid",
  "serde_json",
  "64-column-tables", # Needed for Discord tables with >32 columns
], optional = true }
diesel_migrations = { version = "2.3", optional = true }
chrono = { version = "0.4", features = ["serde"], optional = true }
uuid = { version = "1.18", features = ["v4", "serde"] }

# Optional backend SDKs
# Enable via features: e.g. `--features gemini`
gemini-rust = { version = "1.5", optional = true }
anthropic-sdk = { version = "0.1", optional = true }
huggingface_inference_rs = { version = "0.5", optional = true }
groqai = { version = "0.1", optional = true }
perplexity = { version = "0.1", optional = true }

# Social media platform SDKs
serenity = { version = "0.12", default-features = false, features = [
  "client",
  "gateway",
  "rustls_backend",
  "model",
  "cache",
], optional = true }

# Terminal UI
ratatui = { version = "0.29", optional = true }
crossterm = { version = "0.28", optional = true }

derive_more = { version = "2", features = ["display", "from"] }
derive-new = "0.7"                                              # Derive new constructors
anyhow = "1"                                                    # Internal utils
toml = "0.9"                                                    # TOML parsing for narratives
config = { version = "0.15", features = ["toml"] }              # Configuration management
clap = { version = "4", features = ["derive"] }                 # CLI argument parsing
dirs = "6"                                                      # Cross-platform directory paths

[features]
default = []
dev = ["gemini", "anthropic", "huggingface", "groq", "perplexity", "database", "tui"]
gemini = ["dep:gemini-rust"]
anthropic = ["dep:anthropic-sdk"]
huggingface = ["dep:huggingface_inference_rs"]
groq = ["dep:groqai"]
perplexity = ["dep:perplexity"]
database = ["dep:diesel", "dep:diesel_migrations", "dep:chrono"]
# Social media platforms
discord = [
  "dep:serenity",
  "database",
] # Discord requires database for state persistence
# Terminal UI
tui = ["dep:ratatui", "dep:crossterm", "database"]
# Enable tests that consume API tokens
api = []

[dev-dependencies]
tempfile = "3"
